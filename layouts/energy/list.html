{{ define "main" }}
<article class="landing-page energy-page">
  <!-- Hero Section: The Pain -->
  <section class="hero">
    <div class="hero-content">
      <p class="hero-eyebrow">For Energy Retailers</p>
      <h1 class="hero-headline">
        What is your actual financial position right now?
      </h1>
      <p class="hero-subtext">
        Not yesterday's reconciliation. Not next week's report. Right now.
      </p>
    </div>
  </section>

  <!-- The Current State -->
  <section id="problem" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">The Problem</h2>
      <div class="pillar-content">
        <p class="stakes">
          Metering in one system. Billing in another. Settlements somewhere else.
          When wholesale spikes in a GSP, you find out weeks later in a spreadsheet.
        </p>
        <p class="proof">
          Dashboards show you what happened. They don't prevent it happening again.
        </p>
      </div>

      <div class="problem-cards">
        <div class="problem-card">
          <h3>Exceptions Are Invisible</h3>
          <p>A failed meter read is a log entry. An engineer spots it. Maybe. Days later.</p>
        </div>
        <div class="problem-card">
          <h3>Intelligence Is Siloed</h3>
          <p>Collections can't see meter status. Metering can't see payment history. Nobody sees the whole picture.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- The Meridian Approach -->
  <section id="approach" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">Ledger-First Architecture</h2>
      <div class="pillar-content">
        <p class="stakes">
          What if a failed meter read wasn't a log entry&mdash;but an open liability in your books?
        </p>
        <p class="proof">
          Consumption isn't just data. It's an asset in kWh and a liability in currency.
          When the read fails, the position stays open. The books don't balance until someone acts.
        </p>
      </div>

      <div class="approach-comparison">
        <div class="comparison-col comparison-traditional">
          <h3>Traditional Approach</h3>
          <ul>
            <li>Meter read fails &rarr; Log entry created</li>
            <li>Exception report generated overnight</li>
            <li>Ops team reviews spreadsheet</li>
            <li>Maybe someone follows up</li>
            <li>Customer billed on estimate</li>
          </ul>
        </div>
        <div class="comparison-col comparison-meridian">
          <h3>Meridian Approach</h3>
          <ul>
            <li>Meter read fails &rarr; Position stays open</li>
            <li>Books don't balance for that meter</li>
            <li>Exception visible immediately</li>
            <li>Cannot proceed until resolved</li>
            <li>Accurate bill or explicit decision to estimate</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Architecture Diagram -->
  <section id="architecture" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">How Consumption Becomes a Position</h2>
      <div class="pillar-content">
        <p class="stakes">
          Meter data into one database, prices into another, reconciled in a spreadsheet at month-end.
        </p>
        <p class="proof">
          Meridian creates a position the moment data arrives. If the data doesn't arrive, the position stays open.
        </p>
      </div>
      <div class="arch-diagram">
        <pre class="mermaid">
sequenceDiagram
    participant Meter as DCC
    participant Meridian as Meridian
    participant Ledger as Ledger

    Meter->>Meridian: 1. Consumption (kWh)
    Meridian->>Meridian: 2. Value at GSP price
    Meridian->>Ledger: 3. Record position
    Note over Ledger: kWh in, GBP owed

    Note over Meter,Ledger: No data? Position stays open.
        </pre>
      </div>
      <p class="arch-stats">
        Event-driven &bull; GSP-level valuation &bull; Position-based exceptions
      </p>
    </div>
  </section>

  <!-- Double Entry: Two Valuations -->
  <section id="double-entry" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">One Read, Two Valuations</h2>
      <div class="pillar-content">
        <p class="stakes">
          Your customer pays a fixed rate. You pay wholesale. Same kWh, different values.
        </p>
        <p class="proof">
          Double-entry bookkeeping. Every meter read creates two positions: revenue at the customer's tariff,
          cost at the GSP wholesale price. The difference is your margin&mdash;visible in real time.
        </p>
      </div>

      <div class="double-entry-diagram">
        <div class="de-row de-header">
          <span>Meter Read</span>
          <span></span>
          <span>Position</span>
        </div>
        <div class="de-row">
          <span class="de-input">100 kWh</span>
          <span class="de-arrow">&rarr;</span>
          <span class="de-output">
            <span class="de-revenue">Revenue: 100 kWh &times; 24p = &pound;24.00</span>
            <span class="de-cost">Cost: 100 kWh &times; 28p = &pound;28.00</span>
            <span class="de-margin de-negative">Margin: -&pound;4.00</span>
          </span>
        </div>
      </div>

      <p class="de-insight">
        This customer is underwater. You know it now, not at month-end.
      </p>
    </div>
  </section>

  <!-- Dashboard Wireframe -->
  <section id="dashboard" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">What Your Dashboard Could Show</h2>
      <div class="pillar-content">
        <p class="stakes">
          You have dashboards. But can they answer "which GSP is hurting us?" in one click?
        </p>
        <p class="proof">
          With positions, this is a table, not a project.
        </p>
      </div>

      <div class="dashboard-wireframe">
        <table class="wireframe-table">
          <thead>
            <tr>
              <th>GSP</th>
              <th>Consumption</th>
              <th>Revenue</th>
              <th>Cost</th>
              <th>Margin</th>
              <th>Open Exceptions</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>_A (East Midlands)</td>
              <td>1.2M kWh</td>
              <td>&pound;288,000</td>
              <td>&pound;264,000</td>
              <td class="positive">&pound;24,000</td>
              <td>12</td>
            </tr>
            <tr>
              <td>_B (South Wales)</td>
              <td>890K kWh</td>
              <td>&pound;213,600</td>
              <td>&pound;231,400</td>
              <td class="negative">-&pound;17,800</td>
              <td>8</td>
            </tr>
            <tr>
              <td>_C (South East)</td>
              <td>2.1M kWh</td>
              <td>&pound;504,000</td>
              <td>&pound;483,000</td>
              <td class="positive">&pound;21,000</td>
              <td>23</td>
            </tr>
            <tr class="total-row">
              <td>Total</td>
              <td>4.19M kWh</td>
              <td>&pound;1,005,600</td>
              <td>&pound;978,400</td>
              <td class="positive">&pound;27,200</td>
              <td>43</td>
            </tr>
          </tbody>
        </table>
        <p class="wireframe-note">
          GSP _B is underwater. 8 open exceptions need resolution before billing.
        </p>
      </div>
    </div>
  </section>

  <!-- What You Can Query -->
  <section id="queries" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">The Questions You Can Answer</h2>
      <div class="pillar-content">
        <p class="stakes">
          "Which GSP is hurting us?" triggers a BI project. Answer next week.
        </p>
        <p class="proof">
          With positions, it's a query. Answer now.
        </p>
      </div>

      <div class="query-grid">
        <div class="query-card">
          <h3>GSP Profitability</h3>
          <p class="query-question">"Which GSP is causing me the greatest heartache?"</p>
          <p class="query-answer">Real-time P&amp;L by grid supply point. See margin erosion as it happens, not in month-end reconciliation.</p>
        </div>
        <div class="query-card">
          <h3>Fixed-Rate Exposure</h3>
          <p class="query-question">"Which customers are underwater right now?"</p>
          <p class="query-answer">Position-level tracking of wholesale cost vs. contracted rate. Know your exposure before it becomes a loss.</p>
        </div>
        <div class="query-card">
          <h3>Exception Rate</h3>
          <p class="query-question">"What percentage of my meters are fit to bill today?"</p>
          <p class="query-answer">Not a report run overnight. A live query of open positions that need resolution.</p>
        </div>
        <div class="query-card">
          <h3>Collection Risk</h3>
          <p class="query-question">"Which accounts have meter issues AND payment issues?"</p>
          <p class="query-answer">Cross-domain intelligence. Meter status, billing history, payment patterns&mdash;one query.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Multi-Asset Positions -->
  <section id="assets" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">Beyond Currency</h2>
      <div class="pillar-content">
        <p class="stakes">
          You trade kWh, gas, carbon, flexibility. Your accounting system doesn't.
        </p>
        <p class="proof">
          Meridian tracks any asset class. Dimensional typing prevents nonsense calculations.
        </p>
      </div>

      <div class="asset-examples">
        <div class="asset-example">
          <span class="asset-type">Electricity Import</span>
          <span class="asset-unit">kWh</span>
        </div>
        <div class="asset-example">
          <span class="asset-type">Electricity Export</span>
          <span class="asset-unit">kWh</span>
        </div>
        <div class="asset-example">
          <span class="asset-type">Gas Consumption</span>
          <span class="asset-unit">kWh (thermal)</span>
        </div>
        <div class="asset-example">
          <span class="asset-type">Flexibility Response</span>
          <span class="asset-unit">kW &times; duration</span>
        </div>
        <div class="asset-example">
          <span class="asset-type">Carbon Offset</span>
          <span class="asset-unit">tCO<sub>2</sub>e</span>
        </div>
        <div class="asset-example">
          <span class="asset-type">Customer Balance</span>
          <span class="asset-unit">GBP / EUR</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Foundation for AI -->
  <section id="foundation" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">The Foundation for What's Next</h2>
      <div class="pillar-content">
        <p class="stakes">
          AI on fragmented data hallucinates. AI on consistent positions reasons.
        </p>
        <p class="proof">
          The unified data model is the prerequisite. Positions provide the ground truth AI needs.
        </p>
      </div>

      <div class="foundation-capabilities">
        <div class="capability">
          <h3>Forecasting</h3>
          <p>Predict consumption and cost by GSP with actual position history, not estimated aggregates.</p>
        </div>
        <div class="capability">
          <h3>Anomaly Detection</h3>
          <p>Spot unusual patterns against a baseline of verified positions, not noisy meter data.</p>
        </div>
        <div class="capability">
          <h3>Customer Intelligence</h3>
          <p>Build profiles from actual financial behaviour, not inferred from disconnected systems.</p>
        </div>
        <div class="capability">
          <h3>Flexibility Optimization</h3>
          <p>Orchestrate demand response with real-time position visibility across your portfolio.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Not a Treasury -->
  <section id="not-treasury" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">You Don't Need to Be a Bank</h2>
      <div class="pillar-content">
        <p class="stakes">
          You hold balances, have credit exposure, trade volatile commodities, settle millions of positions.
        </p>
        <p class="proof">
          You don't need trading floor complexity. You need the rigour of knowing where your money is.
        </p>
      </div>

      <blockquote class="meridian-promise">
        <p>
          A failed metre read isn't a log entry&mdash;it's an open liability.
        </p>
        <p>
          The books don't balance until someone resolves it.
        </p>
      </blockquote>
    </div>
  </section>

  <!-- Technical Foundation -->
  <section id="technical" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">Built for Scale</h2>
      <div class="pillar-content">
        <p class="stakes">
          MHHS means 48x the data with tighter deadlines.
        </p>
        <p class="proof">
          Event-driven. Kubernetes-native. Horizontally scalable. Open source.
        </p>
      </div>
      <div class="tech-grid">
        <div class="tech-item">
          <h3>Event-Driven</h3>
          <p>Stream processing, not batch. Know about problems when they happen, not in tomorrow's report.</p>
        </div>
        <div class="tech-item">
          <h3>BIAN-Aligned</h3>
          <p>Industry-standard service domains. Your team speaks the same language as the world's largest banks.</p>
        </div>
        <div class="tech-item">
          <h3>Kubernetes-Native</h3>
          <p>Horizontally scalable. Handle MHHS volumes and seasonal peaks without re-architecting.</p>
        </div>
        <div class="tech-item">
          <h3>Open Source</h3>
          <p>Apache 2.0 licensed. No vendor lock-in. Inspect every line. Build institutional expertise.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="section contact-section">
    <div class="section-content">
      <h2>Let's Talk Architecture</h2>
      <p class="contact-lead">
        Happy to walk through how this maps to your specific challenges.
      </p>
      <div class="hero-cta">
        <a href="mailto:ben@meridianhub.org" class="btn btn-primary">
          Contact Ben
        </a>
        <a href="/" class="btn btn-secondary">
          Technical Vision
        </a>
      </div>
    </div>
  </section>
</article>
{{ end }}
