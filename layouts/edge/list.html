{{ define "main" }}
<article class="landing-page edge-page">
  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <blockquote class="hero-quote">
        "In the particular is contained the universal."
        <cite>— James Joyce</cite>
      </blockquote>

      <nav class="hero-nav">
        <a href="#local" class="hero-word">Local</a>
        <span class="hero-dot"></span>
        <a href="#instant" class="hero-word">Instant</a>
        <span class="hero-dot"></span>
        <a href="#offline" class="hero-word">Offline</a>
      </nav>

      <p class="hero-subtext">
        One device. Full capability: the same code that runs in the cloud, running on site.
      </p>
    </div>
  </section>

  <!-- The Problem -->
  <section id="problem" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">The Connectivity Wall</h2>
      <div class="pillar-content">
        <p class="stakes">
          Traditional In-Home Displays are dumb terminals. They wait for the cloud
          to tell them what the price is.
        </p>
        <p class="proof">
          When the Wi-Fi drops, visibility stops. When the cloud is slow, "real-time"
          data is already minutes old. Customers see abstract kWh because the device
          can't compute currency.
        </p>
      </div>

      <div class="problem-cards">
        <div class="problem-card">
          <h3>Cloud Round-Trip Latency</h3>
          <p>You can't show the cost of a boiling kettle in real-time if the maths has to travel 500 miles to a data centre and back.</p>
        </div>
        <div class="problem-card">
          <h3>Data Egress Costs</h3>
          <p>Sending 1-second pulses to the cloud for millions of homes is a bandwidth nightmare. Most of that data is noise that should never leave the home.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- LOCAL: The Edge Approach -->
  <section id="local" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">Local</h2>
      <p class="pillar-subtitle">A ledger in the meter</p>
      <div class="pillar-content">
        <p class="stakes">
          Meridian Edge isn't a client. It's a full instance of the Meridian engine.
        </p>
        <p class="proof">
          The same BIAN-compliant architecture that runs in the cloud, ported to run
          on low-power hardware. The device doesn't just record pulses - it runs
          the valuation logic locally.
        </p>
      </div>

      <div class="approach-comparison">
        <div class="comparison-col comparison-traditional">
          <h3>Standard IoT Device</h3>
          <ul>
            <li>Record pulse &rarr; Send to cloud</li>
            <li>Cloud computes &rarr; Send to app</li>
            <li>Offline = No data, no price</li>
            <li>High cloud storage costs</li>
          </ul>
        </div>
        <div class="comparison-col comparison-meridian">
          <h3>Meridian Edge</h3>
          <ul>
            <li>Compute value locally, instantly</li>
            <li>13 months of history on-device</li>
            <li>Offline = Full visibility continues</li>
            <li>Only aggregates leave the home</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- INSTANT: Instant Valuation -->
  <section id="instant" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">Instant</h2>
      <p class="pillar-subtitle">Sub-second financial updates</p>
      <div class="pillar-content">
        <p class="stakes">
          "How much am I spending right now?" shouldn't require a round-trip to AWS.
        </p>
        <p class="proof">
          Push the tariff to the edge. The device applies the valuation logic to local
          pulses. Same business logic in the meter as in the cloud. Total consistency.
        </p>
      </div>

      <div class="arch-diagram">
        <pre class="mermaid">
sequenceDiagram
    participant Cloud as Meridian Cloud
    participant Edge as Meridian Edge
    participant Meter as Meter

    Cloud->>Edge: Tariff (daily)
    loop Every second
        Meter->>Edge: Pulse
        Edge->>Edge: Value locally
    end
    Note over Edge: Customer sees £ instantly
    Edge->>Cloud: Settlement packet (every 30 min)
        </pre>
      </div>

      <div class="dashboard-wireframe">
        <h3 class="wireframe-title">What the customer sees: In-Home Display</h3>
        <div class="ihd-display">
          <div class="ihd-main">
            <span class="ihd-label">Right now</span>
            <span class="ihd-value ihd-earning">+&pound;0.03<span class="ihd-unit">/min</span></span>
          </div>
          <svg class="ihd-chart-svg" viewBox="0 0 320 140" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
            <!-- Y-axis labels -->
            <text x="28" y="18" class="ihd-svg-label" text-anchor="end">£0.30</text>
            <text x="28" y="43" class="ihd-svg-label" text-anchor="end">£0.15</text>
            <text x="28" y="73" class="ihd-svg-label ihd-svg-zero" text-anchor="end">£0</text>
            <text x="28" y="103" class="ihd-svg-label" text-anchor="end">-£0.15</text>
            <text x="28" y="128" class="ihd-svg-label" text-anchor="end">-£0.30</text>

            <!-- Chart area background -->
            <rect x="35" y="10" width="270" height="120" fill="#242b3d" rx="4"/>

            <!-- Zero line -->
            <line x1="35" y1="70" x2="305" y2="70" stroke="#475569" stroke-width="1"/>

            <!-- Import bars (red, grow UP from zero) - Morning -->
            <rect x="42" y="32" width="20" height="38" fill="#f87171" rx="2"/>
            <rect x="69" y="42" width="20" height="28" fill="#f87171" rx="2"/>
            <rect x="96" y="58" width="20" height="12" fill="#f87171" rx="2"/>

            <!-- Export bars (green, grow DOWN from zero) - Midday solar -->
            <rect x="123" y="70" width="20" height="18" fill="#4ade80" rx="2"/>
            <rect x="150" y="70" width="20" height="35" fill="#4ade80" rx="2"/>
            <rect x="177" y="70" width="20" height="42" fill="#4ade80" rx="2"/>
            <rect x="204" y="70" width="20" height="28" fill="#4ade80" rx="2"/>
            <rect x="231" y="70" width="20" height="10" fill="#4ade80" rx="2"/>

            <!-- Import bars - Evening -->
            <rect x="258" y="48" width="20" height="22" fill="#f87171" rx="2"/>
            <rect x="285" y="38" width="20" height="32" fill="#f87171" rx="2"/>

            <!-- CO2 line (yellow) - high morning/evening, low midday -->
            <polyline
              points="52,25 79,30 106,45 133,62 160,75 187,78 214,68 241,55 268,35 295,22"
              fill="none"
              stroke="#fbbf24"
              stroke-width="2.5"
              stroke-linecap="round"
              stroke-linejoin="round"/>

            <!-- X-axis labels -->
            <text x="52" y="138" class="ihd-svg-label" text-anchor="middle">08</text>
            <text x="79" y="138" class="ihd-svg-label" text-anchor="middle">09</text>
            <text x="106" y="138" class="ihd-svg-label" text-anchor="middle">10</text>
            <text x="133" y="138" class="ihd-svg-label" text-anchor="middle">11</text>
            <text x="160" y="138" class="ihd-svg-label" text-anchor="middle">12</text>
            <text x="187" y="138" class="ihd-svg-label" text-anchor="middle">13</text>
            <text x="214" y="138" class="ihd-svg-label" text-anchor="middle">14</text>
            <text x="241" y="138" class="ihd-svg-label" text-anchor="middle">15</text>
            <text x="268" y="138" class="ihd-svg-label" text-anchor="middle">16</text>
            <text x="295" y="138" class="ihd-svg-label" text-anchor="middle">17</text>
          </svg>
          <div class="ihd-chart-legend">
            <span class="ihd-legend-item"><span class="ihd-legend-dot ihd-import"></span> Import</span>
            <span class="ihd-legend-item"><span class="ihd-legend-dot ihd-export"></span> Export</span>
            <span class="ihd-legend-item"><span class="ihd-legend-line"></span> CO₂</span>
          </div>
          <div class="ihd-row">
            <div class="ihd-stat">
              <span class="ihd-stat-label">Today</span>
              <span class="ihd-stat-value ihd-earning">+&pound;1.24</span>
            </div>
            <div class="ihd-stat">
              <span class="ihd-stat-label">This week</span>
              <span class="ihd-stat-value">&pound;8.40</span>
            </div>
            <div class="ihd-stat">
              <span class="ihd-stat-label">This month</span>
              <span class="ihd-stat-value">&pound;42.15</span>
            </div>
          </div>
        </div>
        <p class="wireframe-note">
          Solar customer earning right now. Money, not kWh. No internet required.
        </p>
      </div>
    </div>
  </section>

  <!-- OFFLINE: Offline Capability -->
  <section id="offline" class="section pillar-section">
    <div class="section-content">
      <h2 class="pillar-title">Offline</h2>
      <p class="pillar-subtitle">Works when the cloud doesn't</p>
      <div class="pillar-content">
        <p class="stakes">
          Connectivity is not guaranteed. Rural areas, network outages, overloaded infrastructure.
        </p>
        <p class="proof">
          Meridian Edge runs the same code as Meridian Cloud. Same valuation logic,
          same quality tracking, same audit guarantees. When the connection is flaky,
          idempotency ensures no double-counting. Reconciliation by design.
        </p>
      </div>

      <div class="query-grid">
        <div class="query-card">
          <h3>Offline Vault</h3>
          <p class="query-answer">Full audit trail preserved locally. Nothing lost during outages.</p>
        </div>
        <div class="query-card">
          <h3>Smart Sync</h3>
          <p class="query-answer">Settlement-ready packets, not raw pulses. 90% reduction in data egress.</p>
        </div>
        <div class="query-card">
          <h3>Privacy-First</h3>
          <p class="query-answer">Granular data stays in the home. Only aggregates leave.</p>
        </div>
        <div class="query-card">
          <h3>Asset Agnostic</h3>
          <p class="query-answer">Same logic for electricity, gas, water, EV charging.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Hardware -->
  <section id="hardware" class="section pillar-section pillar-alt">
    <div class="section-content">
      <h2 class="pillar-title">Hardware Ready</h2>
      <div class="pillar-content">
        <p class="stakes">
          Most CAD software treats the device as a display. The compute stays in the cloud.
        </p>
        <p class="proof">
          Meridian Edge treats the device as a ledger. Runs on Pi Zero class hardware.
          CAD, mobile app, or standalone unit - the same engine everywhere.
        </p>
      </div>

      <div class="tech-grid">
        <div class="tech-item">
          <h3>Low-Cost</h3>
          <p>Pi Zero class hardware. Go application with SQLite. Mass rollout economics.</p>
        </div>
        <div class="tech-item">
          <h3>Multi-Asset</h3>
          <p>Gas, solar, battery, import, export. One device, multiple accounts.</p>
        </div>
        <div class="tech-item">
          <h3>White-Label</h3>
          <p>Your brand, your hardware, Meridian inside.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="section contact-section">
    <div class="section-content">
      <h2>Get Started</h2>
      <p class="contact-lead">
        Discussing hardware specs or pilot trials?
      </p>
      <div class="hero-cta">
        <a href="mailto:ben@meridianhub.org" class="btn btn-primary">
          Contact Ben
        </a>
        <a href="https://github.com/meridianhub/meridian" class="btn btn-secondary" target="_blank" rel="noopener">
          View Source
        </a>
      </div>
    </div>
  </section>
</article>
{{ end }}
